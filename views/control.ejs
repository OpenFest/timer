<div id="wrapper">
    <h1><%= title %></h1>
    <div id="countdown"></div>
    <button id="start" class="thoughtbot">Start</button>
    <button id="stop" class="thoughtbot">Stop</button>
<br/>

<% for(let [ name, length ] of Object.entries(timers)) { %>
    <button class="reset" data-name="<%= name %>" data-length="<%= length %>"><%= name %> (<%= length %> min)</button>
<% } %>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
const connectRoom = function(room) {
        var socket = io(room);

        socket.on('time', (data) => document.getElementById('countdown').innerHTML = data.time);

        document.getElementById('start').onclick = () => socket.emit('click:start');
        document.getElementById('stop').onclick = () => socket.emit('click:stop');

        for(let btn of document.querySelectorAll('.reset')) btn.onclick = (e) => socket.emit('click:reset', e.target.dataset.length);
}

connectRoom('/<%= room %>');
</script>
